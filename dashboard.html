<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生命体征监测</title>
    <style>
        body {
            background-color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .dashboard {
            position: relative;
            width: 300px;
            height: 200px;
            margin: 20px 0;
        }

        .dashboard-title {
            color: white;
            text-align: center;
            margin-bottom: -40px;
            font-size: 18px;
        }

        .gauge {
            width: 100%;
            height: 100%;
        }

        .gauge-background {
            fill: none;
            stroke: #222;
            stroke-width: 0;
        }

        .gauge-red {
            fill: none;
            stroke: #FF3B30;
            stroke-width: 10;
        }

        .gauge-yellow {
            fill: none;
            stroke: #FFD700;
            stroke-width: 10;
        }

        .gauge-green {
            fill: none;
            stroke: #34C759;
            stroke-width: 10;
        }

        .pointer {
            fill: white;
            transform-origin: bottom;
            transition: transform 0.5s ease;
        }

        .pointer-base {
            fill: white;
        }

        .value {
            fill: white;
            font-size: 24px;
            font-family: Arial, sans-serif;
            text-anchor: middle;
        }

        .scale-text {
            fill: white;
            font-size: 14px;
            font-family: Arial, sans-serif;
        }

        .unit {
            fill: #999;
            font-size: 14px;
            font-family: Arial, sans-serif;
            text-anchor: middle;
        }

        .spo2-container {
            width: 300px;
            height: 150px;
            margin: 20px 0;
            padding: 20px;
            background-color: #333;
        }

        .spo2-value {
            color: white;
            font-size: 72px;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px 0;
        }

        .progress-container {
            position: relative;
            width: 100%;
            height: 20px;
            margin-bottom: 10px;
            background-color: #444;
        }

        .progress-bar {
            height: 100%;
            background-color: #fff;
            position: relative;
            transition: width 0.5s ease;
        }

        .progress-warning-line {
            position: absolute;
            left: 90%;
            top: -5px;
            height: 30px;
            width: 2px;
            background-color: white;
            z-index: 2;
        }

        .progress-marker {
            position: absolute;
            width: 2px;
            height: 30px;
            background-color: white;
            top: -5px;
            transition: left 0.5s ease;
        }

        .scale-labels {
            display: flex;
            justify-content: flex-end;
            gap: 20px;
            color: white;
            font-family: Arial, sans-serif;
            font-size: 24px;
            padding-right: 10px;
        }
    </style>
</head>
<body>
    <!-- 心率仪表盘 -->
    <div class="dashboard">
        <div class="dashboard-title">心率</div>
        <svg class="gauge" viewBox="0 0 200 150">
            <!-- 背景 -->
            <path class="gauge-background" d="M20,130 A90,90 0 0,1 180,130"/>
            <!-- 红色区域1 -->
            <path class="gauge-red" d="M20,130 A90,90 0 0,1 25,90"/>
            <!-- 黄色区域1 -->
            <path class="gauge-yellow" d="M27,85 A90,90 0 0,1 50,55"/>
            <!-- 绿色区域 -->
            <path class="gauge-green" d="M55,50 A90,90 0 0,1 145,50"/>
            <!-- 黄色区域2 -->
            <path class="gauge-yellow" d="M150,55 A90,90 0 0,1 173,85"/>
            <!-- 红色区域2 -->
            <path class="gauge-red" d="M175,90 A90,90 0 0,1 180,130"/>
    
            <!-- 指针 -->
            <g id="hr-pointer" style="transform-box: fill-box; transform-origin: center bottom;">
                <path class="pointer" d="M97,65 L103,65 L100,40 Z" style="transform-origin: 100px 130px;"/>
                <circle class="pointer-base" cx="100" cy="130" r="3"/>
            </g>
            
            <!-- 当前心率显示 -->
            <text class="value" id="hr-value" x="100" y="100">0</text>
            <text class="unit" x="100" y="115">bpm</text>
    
            <!-- 刻度 -->
            <g>
                <!-- 红色段刻度 -->
                <!-- <text class="scale-text" x="0" y="145">60</text>
                <text class="scale-text" x="180" y="145">120</text> -->

                <!-- 黄色段刻度 -->
                <text class="scale-text" x="5" y="90">70</text>
                <text class="scale-text" x="180" y="90">110</text>

                <!-- 绿色段刻度 -->
                <text class="scale-text" x="35" y="50">80</text>
                <text class="scale-text" x="150" y="50">100</text>
            </g>
        </svg>
    </div>
    

    <!-- EtCO2仪表盘 -->
    <div class="dashboard">
        <div class="dashboard-title">呼气末CO2</div>
        <svg class="gauge" viewBox="0 0 200 150">
            <!-- 背景 -->
            <path class="gauge-background" d="M20,130 A90,90 0 0,1 180,130"/>
            <!-- 红色区域1 -->
            <path class="gauge-red" d="M20,130 A90,90 0 0,1 25,90"/>
            <!-- 黄色区域1 -->
            <path class="gauge-yellow" d="M27,85 A90,90 0 0,1 50,55"/>
            <!-- 绿色区域 -->
            <path class="gauge-green" d="M55,50 A90,90 0 0,1 145,50"/>
            <!-- 黄色区域2 -->
            <path class="gauge-yellow" d="M150,55 A90,90 0 0,1 173,85"/>
            <!-- 红色区域2 -->
            <path class="gauge-red" d="M175,90 A90,90 0 0,1 180,130"/>
            
            <!-- 指针 -->
            <g id="etco2-pointer" style="transform-box: fill-box; transform-origin: center bottom;">
                <path class="pointer" d="M97,65 L103,65 L100,40 Z" style="transform-origin: 100px 130px;"/>
                <circle class="pointer-base" cx="100" cy="130" r="3"/>
            </g>

            <text class="value" id="etco2-value" x="100" y="100">0</text>
            <text class="unit" x="100" y="115">mmHg</text>
            
            <!-- 刻度 -->
            <g>
                <!-- 红色段刻度 -->
                <text class="scale-text" x="0" y="145">60</text>
                <text class="scale-text" x="180" y="145">120</text>

                <!-- 黄色段刻度 -->
                <text class="scale-text" x="5" y="90">70</text>
                <text class="scale-text" x="180" y="90">110</text>

                <!-- 绿色段刻度 -->
                <text class="scale-text" x="35" y="50">80</text>
                <text class="scale-text" x="150" y="50">100</text>
            </g>
        </svg>
    </div>

    <!-- 体温仪表盘 -->
    <div class="dashboard">
        <div class="dashboard-title">体温</div>
        <svg class="gauge" viewBox="0 0 200 150">
            <!-- 背景 -->
            <path class="gauge-background" d="M20,130 A90,90 0 0,1 180,130"/>
            <!-- 红色区域1 -->
            <path class="gauge-red" d="M20,130 A90,90 0 0,1 25,90"/>
            <!-- 黄色区域1 -->
            <path class="gauge-yellow" d="M27,85 A90,90 0 0,1 50,55"/>
            <!-- 绿色区域 -->
            <path class="gauge-green" d="M55,50 A90,90 0 0,1 145,50"/>
            <!-- 黄色区域2 -->
            <path class="gauge-yellow" d="M150,55 A90,90 0 0,1 173,85"/>
            <!-- 红色区域2 -->
            <path class="gauge-red" d="M175,90 A90,90 0 0,1 180,130"/>
            
            <!-- 指针 -->
            <g id="temp-pointer" style="transform-box: fill-box; transform-origin: center bottom;">
                <path class="pointer" d="M97,65 L103,65 L100,40 Z" style="transform-origin: 100px 130px;"/>
                <circle class="pointer-base" cx="100" cy="130" r="3"/>
            </g>

            
            <text class="value" id="temp-value" x="100" y="100">0</text>
            <text class="unit" x="100" y="115">°C</text>
            
            <!-- 刻度 -->
            <g>
                <!-- 红色段刻度 -->
                <text class="scale-text" x="0" y="145">60</text>
                <text class="scale-text" x="180" y="145">120</text>

                <!-- 黄色段刻度 -->
                <text class="scale-text" x="5" y="90">70</text>
                <text class="scale-text" x="180" y="90">110</text>

                <!-- 绿色段刻度 -->
                <text class="scale-text" x="35" y="50">80</text>
                <text class="scale-text" x="150" y="50">100</text>
            </g>
        </svg>
    </div>

    <!-- SpO2 血氧监测区域 -->
    <div class="spo2-container">
        <div class="progress-container">
            <div class="progress-bar" id="spo2-progress"></div>
            <div class="progress-warning-line"></div>
            <div class="progress-marker" id="spo2-marker"></div>
        </div>
        <div class="scale-labels">
            <span>90</span>
            <span>100</span>
        </div>
        <div class="spo2-value" id="spo2-value">95</div>
    </div>

    <script>
        // 通用函数
        function valueToAngle(value, min, max) {
            const minAngle = -90; // 对应于最小值的角度
            const maxAngle = 90; // 对应于最大值的角度
            return minAngle + (value - min) * (maxAngle - minAngle) / (max - min);
        }

        function updateGauge(pointer, valueText, value, valmin, valmax) {
            // 计算心率值对应的角度
            const hrAngle = valueToAngle(value, valmin, valmax); // 更新这里的min和max值为60和120
            pointer.style.transform = `rotate(${hrAngle}deg)`; // 使用计算出的角度来旋转指针
            valueText.textContent = typeof value === 'number' ? value.toFixed(1) : value;
        }

        // 心率模拟
        function generateHeartRate() {
            // 生成60到120之间的随机数
            return 60 + Math.random() * (120 - 60);
        }


        // EtCO2模拟 (正常范围35-45 mmHg)
        function generateEtCO2() {
            const baseValue = 40;
            return baseValue + (Math.random() - 0.5) * 4;
        }

        // 体温模拟 (正常范围36.3-37.2°C)
        function generateTemp() {
            const baseTemp = 36.8;
            return baseTemp + (Math.random() - 0.5) * 0.4;
        }

        // SpO2 相关元素
        const spo2Value = document.getElementById('spo2-value');
        const spo2Progress = document.getElementById('spo2-progress');
        const spo2Marker = document.getElementById('spo2-marker');

        // SpO2 数值生成函数 (0-100% 正常范围)
        function generateSpO2() {
            const baseValue = 97;
            return Math.min(100, Math.max(0, baseValue + (Math.random() - 0.5) * 4));
        }

        // 更新 SpO2 显示
        function updateSpO2(value) {
            // 更新数值显示
            spo2Value.textContent = Math.round(value);
            
            // 计算进度条宽度和标记位置 (0-100 范围)
            const percentage = value;
            spo2Progress.style.width = `${percentage}%`;
            spo2Marker.style.left = `${percentage}%`;

            // 低于90%时添加警告效果
            if (value < 90) {
                spo2Progress.style.backgroundColor = '#FF3B30';  // 警告色
            } else {
                spo2Progress.style.backgroundColor = '#fff';     // 正常色
            }
        }

        // 更新所有仪表盘
        setInterval(() => {
            // 心率更新
            const hrValue = generateHeartRate();
            updateGauge(
                document.getElementById('hr-pointer'),
                document.getElementById('hr-value'),
                hrValue,
                60,
                120
            );

            // EtCO2更新
            const etco2Value = generateEtCO2();
            const etco2Angle = valueToAngle(etco2Value, 20, 60);
            updateGauge(
                document.getElementById('etco2-pointer'),
                document.getElementById('etco2-value'),
                etco2Value,
                30,
                45
            );

            // 体温更新
            const tempValue = generateTemp();
            const tempAngle = valueToAngle(tempValue, 35, 38);
            updateGauge(
                document.getElementById('temp-pointer'),
                document.getElementById('temp-value'),
                tempValue,
                30,
                45
            );

            // 添加 SpO2 更新
            const spo2 = generateSpO2();
            updateSpO2(spo2);
        }, 1000);

        // 初始化显示
        updateGauge(document.getElementById('hr-pointer'), document.getElementById('hr-value'), 90);
        updateGauge(document.getElementById('etco2-pointer'), document.getElementById('etco2-value'), 37.5);
        updateGauge(document.getElementById('temp-pointer'), document.getElementById('temp-value'), 37.5);
        updateSpO2(95);
    </script>
</body>
</html> 