<!-- BP模块 -->
<div class="monitor-block bp-block">
    <div class="block-title">BP</div>
    <div class="bp-content">
        <!-- 收缩压部分 -->
        <div class="bp-row">
            <div class="bp-value">120</div>
            <div class="bp-gauge">
                <div class="gauge-scale">
                    <div class="gauge-segment red"></div>
                    <div class="gauge-segment yellow"></div>
                    <div class="gauge-segment green"></div>
                    <div class="gauge-segment yellow"></div>
                    <div class="gauge-segment red"></div>
                </div>
                <div class="gauge-limits">
                    <span>140</span>
                    <span>90</span>
                </div>
            </div>
        </div>
        
        <!-- 分割线 -->
        <div class="bp-divider"></div>
        
        <!-- 舒张压部分 -->
        <div class="bp-row">
            <div class="bp-value">80</div>
            <div class="bp-gauge">
                <div class="gauge-scale">
                    <div class="gauge-segment red"></div>
                    <div class="gauge-segment yellow"></div>
                    <div class="gauge-segment green"></div>
                    <div class="gauge-segment yellow"></div>
                    <div class="gauge-segment red"></div>
                </div>
                <div class="gauge-limits">
                    <span>90</span>
                    <span>60</span>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.bp-block {
    width: 190px;
    height: 180px;
    background-color: #3F3F3F;
    position: relative;
}

.bp-content {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.bp-row {
    display: flex;
    align-items: center;
    gap: 20px;
}

.bp-value {
    font-size: 24px;
    color: white;
    min-width: 60px;
}

.bp-gauge {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.gauge-scale {
    width: 9px;
    height: 50px;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.gauge-segment {
    height: 6px;
    width: 100%;
}

.gauge-segment.red {
    background-color: #FF5757;
}

.gauge-segment.yellow {
    background-color: #FFCD05;
}

.gauge-segment.green {
    background-color: #00C764;
    height: 18px;
}

.gauge-limits {
    display: flex;
    flex-direction: column;
    color: white;
    font-size: 12px;
    position: absolute;
    left: -25px;
}

.bp-divider {
    height: 1px;
    background-color: white;
    margin: 10px 0;
}
</style>

<script>
// BP数据更新函数
function updateBP(systolic, diastolic) {
    // 更新收缩压和舒张压的显示值
    const bpValues = document.querySelectorAll('.bp-value');
    bpValues[0].textContent = systolic;
    bpValues[1].textContent = diastolic;
    
    // 更新收缩压条形仪表颜色
    updateBPGauge(systolic, 90, 140, 0);
    // 更新舒张压条形仪表颜色
    updateBPGauge(diastolic, 60, 90, 1);
}

function updateBPGauge(value, lowLimit, highLimit, index) {
    const gaugeSegments = document.querySelectorAll('.gauge-scale')[index].children;
    
    // 清除所有激活状态
    Array.from(gaugeSegments).forEach(segment => {
        segment.style.opacity = '0.3';
    });
    
    // 根据值的范围激活对应段
    if (value <= lowLimit - 15) {
        gaugeSegments[4].style.opacity = '1'; // 最下方红色
    } else if (value <= lowLimit) {
        gaugeSegments[3].style.opacity = '1'; // 下方黄色
    } else if (value <= highLimit) {
        gaugeSegments[2].style.opacity = '1'; // 中间绿色
    } else if (value <= highLimit + 15) {
        gaugeSegments[1].style.opacity = '1'; // 上方黄色
    } else {
        gaugeSegments[0].style.opacity = '1'; // 最上方红色
    }
}

// 测试数据更新
setInterval(() => {
    const systolic = Math.floor(Math.random() * (160 - 80) + 80);
    const diastolic = Math.floor(Math.random() * (100 - 50) + 50);
    updateBP(systolic, diastolic);
}, 2000);
</script> 